---
layout: ../../layouts/DocsLayout.astro
title: VirtualTable
---

import { TableDemo } from '../../components/TableDemo';

# VirtualTable

<p className="text-lg text-base-content/70 !mt-2 mb-4">
  A headless virtualized table hook built on TanStack Table + TanStack Virtual. Render thousands of
  rows with ease.
</p>

## Basic Usage

<div className="grid grid-cols-1 lg:grid-cols-5 gap-8 my-6 not-prose">
  <div className="lg:col-span-3">
    <TableDemo client:load rowCount={1000} height={570} />
  </div>
  <div className="lg:col-span-2 text-sm">
    <p className="mb-3 text-base-content/70">The simplest usage - just pass data and columns:</p>
```tsx
const { table, rows, virtualItems, totalSize, containerRef } = useVirtualTable({
  data,
  columns,
  rowHeight: 44,
});
```
    <div className="mt-4 overflow-x-auto">
      <table className="table-compact">
        <thead><tr><th>Option</th><th>Type</th><th>Default</th></tr></thead>
        <tbody>
          <tr><td><code>data</code></td><td><code>TData[]</code></td><td>required</td></tr>
          <tr><td><code>columns</code></td><td><code>ColumnDef&lt;TData&gt;[]</code></td><td>required</td></tr>
          <tr><td><code>rowHeight</code></td><td><code>number</code></td><td>40</td></tr>
          <tr><td><code>overscan</code></td><td><code>number</code></td><td>5</td></tr>
          <tr><td><code>getRowId</code></td><td><code>(row) =&gt; string</code></td><td>—</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

## Sorting

<div className="grid grid-cols-1 lg:grid-cols-5 gap-8 not-prose">
  <div className="lg:col-span-3">
    <p className="text-xs font-medium text-base-content/50">Single Column</p>
    <TableDemo client:load rowCount={50} height={360} enableSorting />
    <p className="text-xs font-medium text-base-content/50 mt-1">Multi-Column (shift+click)</p>
    <TableDemo client:load rowCount={50} height={360} enableSorting enableMultiSort />
  </div>
  <div className="lg:col-span-2 text-sm">
    <p className="mb-3 text-base-content/70">Click headers to sort. Shift+click for multi-column.</p>
```tsx
const { sorting } = useVirtualTable({
  data,
  columns,
  enableSorting: true,
  enableMultiSort: true,
});

// Controlled:
const [sorting, setSorting] = useState([]);
useVirtualTable({ sorting, onSortingChange: setSorting });

````
    <div className="mt-4 overflow-x-auto">
      <table className="table-compact">
        <thead><tr><th>Option</th><th>Type</th><th>Default</th></tr></thead>
        <tbody>
          <tr><td><code>enableSorting</code></td><td><code>boolean</code></td><td>false</td></tr>
          <tr><td><code>enableMultiSort</code></td><td><code>boolean</code></td><td>false</td></tr>
          <tr><td><code>sorting</code></td><td><code>SortingState</code></td><td>—</td></tr>
          <tr><td><code>onSortingChange</code></td><td><code>(state) =&gt; void</code></td><td>—</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

## Row Selection

<div className="grid grid-cols-1 lg:grid-cols-5 gap-8 my-6 not-prose">
  <div className="lg:col-span-3">
    <TableDemo client:load rowCount={50} height={570} enableRowSelection />
  </div>
  <div className="lg:col-span-2 text-sm">
    <p className="mb-3 text-base-content/70">Select rows with checkboxes.</p>
```tsx
const { rowSelection } = useVirtualTable({
  data,
  columns,
  enableRowSelection: true,
  getRowId: (row) => row.id,
});

// Selection column:
{
  id: 'select',
  header: ({ table }) => <Checkbox checked={table.getIsAllRowsSelected()} />,
  cell: ({ row }) => <Checkbox checked={row.getIsSelected()} />,
}
````

    <div className="mt-4 overflow-x-auto">
      <table className="table-compact">
        <thead><tr><th>Option</th><th>Type</th><th>Default</th></tr></thead>
        <tbody>
          <tr><td><code>enableRowSelection</code></td><td><code>boolean</code></td><td>false</td></tr>
          <tr><td><code>rowSelection</code></td><td><code>RowSelectionState</code></td><td>—</td></tr>
          <tr><td><code>onRowSelectionChange</code></td><td><code>(state) =&gt; void</code></td><td>—</td></tr>
        </tbody>
      </table>
    </div>

  </div>
</div>

## Row Expansion

<div className="grid grid-cols-1 lg:grid-cols-5 gap-8 my-6 not-prose">
  <div className="lg:col-span-3">
    <TableDemo client:load rowCount={50} height={570} enableRowExpansion />
  </div>
  <div className="lg:col-span-2 text-sm">
    <p className="mb-3 text-base-content/70">Expand rows to show additional content.</p>
```tsx
const { expanded } = useVirtualTable({
  data,
  columns,
  enableRowExpansion: true,
  expandedRowHeight: 100,
  getRowCanExpand: (row) => true,
});

// In row render:
{row.getIsExpanded() && <ExpandedContent />}

````
    <div className="mt-4 overflow-x-auto">
      <table className="table-compact">
        <thead><tr><th>Option</th><th>Type</th><th>Default</th></tr></thead>
        <tbody>
          <tr><td><code>enableRowExpansion</code></td><td><code>boolean</code></td><td>false</td></tr>
          <tr><td><code>expandedRowHeight</code></td><td><code>number</code></td><td>200</td></tr>
          <tr><td><code>expanded</code></td><td><code>ExpandedState</code></td><td>—</td></tr>
          <tr><td><code>onExpandedChange</code></td><td><code>(state) =&gt; void</code></td><td>—</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

## Keyboard Navigation

<div className="grid grid-cols-1 lg:grid-cols-5 gap-8 my-6 not-prose">
  <div className="lg:col-span-3">
    <TableDemo client:load rowCount={50} height={570} enableKeyboardNavigation enableRowSelection />
  </div>
  <div className="lg:col-span-2 text-sm">
    <p className="mb-3 text-base-content/70">Click table, then use arrow keys to navigate.</p>
```tsx
const { focusedRowIndex, handleKeyDown } = useVirtualTable({
  data,
  columns,
  enableKeyboardNavigation: true,
});

<div ref={containerRef} tabIndex={0} onKeyDown={handleKeyDown}>
````

    <div className="my-3 text-xs space-y-1 text-base-content/70">
      <div><kbd className="kbd kbd-xs">↑↓</kbd> Move focus</div>
      <div><kbd className="kbd kbd-xs">Home</kbd> <kbd className="kbd kbd-xs">End</kbd> Jump to first/last</div>
      <div><kbd className="kbd kbd-xs">Space</kbd> Toggle selection</div>
      <div><kbd className="kbd kbd-xs">Enter</kbd> Toggle expansion</div>
    </div>
    <div className="mt-4 overflow-x-auto">
      <table className="table-compact">
        <thead><tr><th>Option</th><th>Type</th><th>Default</th></tr></thead>
        <tbody>
          <tr><td><code>enableKeyboardNavigation</code></td><td><code>boolean</code></td><td>false</td></tr>
          <tr><td><code>focusedRowIndex</code></td><td><code>number</code></td><td>—</td></tr>
          <tr><td><code>onFocusedRowChange</code></td><td><code>(index) =&gt; void</code></td><td>—</td></tr>
        </tbody>
      </table>
    </div>

  </div>
</div>

## Infinite Scroll

<div className="grid grid-cols-1 lg:grid-cols-5 gap-8 my-6 not-prose">
  <div className="lg:col-span-3">
    <TableDemo client:load rowCount={50} height={570} />
  </div>
  <div className="lg:col-span-2 text-sm">
    <p className="mb-3 text-base-content/70">Load more data when scrolling near the bottom.</p>
```tsx
const { handleScroll } = useVirtualTable({
  data,
  columns,
  onScrollToBottom: () => {
    if (!isFetching && hasNextPage) fetchNextPage();
  },
  scrollBottomThreshold: 500,
});

<div ref={containerRef} onScroll={handleScroll}>
```
    <div className="mt-4 overflow-x-auto">
      <table className="table-compact">
        <thead><tr><th>Option</th><th>Type</th><th>Default</th></tr></thead>
        <tbody>
          <tr><td><code>onScrollToBottom</code></td><td><code>() =&gt; void</code></td><td>—</td></tr>
          <tr><td><code>scrollBottomThreshold</code></td><td><code>number</code></td><td>100</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

## Column Resizing

<div className="grid grid-cols-1 lg:grid-cols-5 gap-8 my-6 not-prose">
  <div className="lg:col-span-3">
    <TableDemo client:load rowCount={50} height={570} />
  </div>
  <div className="lg:col-span-2 text-sm">
    <p className="mb-3 text-base-content/70">Drag column borders to resize.</p>
```tsx
const { columnSizing } = useVirtualTable({
  data,
  columns,
  enableColumnResizing: true,
  columnResizeMode: 'onChange',
});

// Add resize handle to header:

<div
  onMouseDown={header.getResizeHandler()}
  style={{ cursor: 'col-resize' }}
/>
```
    <div className="mt-4 overflow-x-auto">
      <table className="table-compact">
        <thead><tr><th>Option</th><th>Type</th><th>Default</th></tr></thead>
        <tbody>
          <tr><td><code>enableColumnResizing</code></td><td><code>boolean</code></td><td>false</td></tr>
          <tr><td><code>columnResizeMode</code></td><td><code>'onChange' | 'onEnd'</code></td><td>'onChange'</td></tr>
          <tr><td><code>columnSizing</code></td><td><code>ColumnSizingState</code></td><td>—</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

## Column Reordering

<div className="grid grid-cols-1 lg:grid-cols-5 gap-8 my-6 not-prose">
  <div className="lg:col-span-3">
    <TableDemo client:load rowCount={50} height={570} />
  </div>
  <div className="lg:col-span-2 text-sm">
    <p className="mb-3 text-base-content/70">Drag and drop columns to reorder.</p>
```tsx
const { columnOrder, reorderColumn } = useVirtualTable({
  data,
  columns,
  enableColumnReordering: true,
});

reorderColumn('sourceId', 'targetId');

````
    <div className="mt-4 overflow-x-auto">
      <table className="table-compact">
        <thead><tr><th>Option</th><th>Type</th><th>Default</th></tr></thead>
        <tbody>
          <tr><td><code>enableColumnReordering</code></td><td><code>boolean</code></td><td>false</td></tr>
          <tr><td><code>columnOrder</code></td><td><code>ColumnOrderState</code></td><td>—</td></tr>
          <tr><td><code>onColumnOrderChange</code></td><td><code>(state) =&gt; void</code></td><td>—</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

## Return Values

```tsx
const {
  // Core
  table,              // TanStack Table instance
  rows,               // Processed row models
  virtualizer,        // TanStack Virtual instance
  virtualItems,       // Currently visible virtual items
  totalSize,          // Total scrollable height (px)
  containerRef,       // Ref for scroll container

  // Handlers
  handleScroll,       // For infinite scroll
  handleKeyDown,      // For keyboard navigation
  reorderColumn,      // (fromId, toId) => void
  setFocusedRow,      // (index) => void

  // State (controlled or internal)
  rowSelection, sorting, expanded, columnSizing, columnOrder, focusedRowIndex,
} = useVirtualTable(options);
````

## Controlled vs Uncontrolled

<div className="grid grid-cols-1 lg:grid-cols-2 gap-6 my-6 not-prose text-sm">
  <div>
    <p className="font-medium mb-2">Uncontrolled</p>
    <p className="text-base-content/70 mb-3">State managed internally:</p>
```tsx
const { sorting } = useVirtualTable({
  enableSorting: true,
});
// `sorting` reflects internal state
```
  </div>
  <div>
    <p className="font-medium mb-2">Controlled</p>
    <p className="text-base-content/70 mb-3">You own the state:</p>
```tsx
const [sorting, setSorting] = useState([]);
useVirtualTable({
  enableSorting: true,
  sorting,
  onSortingChange: setSorting,
});
```
  </div>
</div>
